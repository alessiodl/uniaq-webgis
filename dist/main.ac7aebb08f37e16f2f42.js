!function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(d&&d(e);p.length;)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={0:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;o.push([170,1]),a()}({166:function(t,e,a){var n={"./af":8,"./af.js":8,"./ar":9,"./ar-dz":10,"./ar-dz.js":10,"./ar-kw":11,"./ar-kw.js":11,"./ar-ly":12,"./ar-ly.js":12,"./ar-ma":13,"./ar-ma.js":13,"./ar-sa":14,"./ar-sa.js":14,"./ar-tn":15,"./ar-tn.js":15,"./ar.js":9,"./az":16,"./az.js":16,"./be":17,"./be.js":17,"./bg":18,"./bg.js":18,"./bm":19,"./bm.js":19,"./bn":20,"./bn.js":20,"./bo":21,"./bo.js":21,"./br":22,"./br.js":22,"./bs":23,"./bs.js":23,"./ca":24,"./ca.js":24,"./cs":25,"./cs.js":25,"./cv":26,"./cv.js":26,"./cy":27,"./cy.js":27,"./da":28,"./da.js":28,"./de":29,"./de-at":30,"./de-at.js":30,"./de-ch":31,"./de-ch.js":31,"./de.js":29,"./dv":32,"./dv.js":32,"./el":33,"./el.js":33,"./en-SG":34,"./en-SG.js":34,"./en-au":35,"./en-au.js":35,"./en-ca":36,"./en-ca.js":36,"./en-gb":37,"./en-gb.js":37,"./en-ie":38,"./en-ie.js":38,"./en-il":39,"./en-il.js":39,"./en-nz":40,"./en-nz.js":40,"./eo":41,"./eo.js":41,"./es":42,"./es-do":43,"./es-do.js":43,"./es-us":44,"./es-us.js":44,"./es.js":42,"./et":45,"./et.js":45,"./eu":46,"./eu.js":46,"./fa":47,"./fa.js":47,"./fi":48,"./fi.js":48,"./fo":49,"./fo.js":49,"./fr":50,"./fr-ca":51,"./fr-ca.js":51,"./fr-ch":52,"./fr-ch.js":52,"./fr.js":50,"./fy":53,"./fy.js":53,"./ga":54,"./ga.js":54,"./gd":55,"./gd.js":55,"./gl":56,"./gl.js":56,"./gom-latn":57,"./gom-latn.js":57,"./gu":58,"./gu.js":58,"./he":59,"./he.js":59,"./hi":60,"./hi.js":60,"./hr":61,"./hr.js":61,"./hu":62,"./hu.js":62,"./hy-am":63,"./hy-am.js":63,"./id":64,"./id.js":64,"./is":65,"./is.js":65,"./it":66,"./it-ch":67,"./it-ch.js":67,"./it.js":66,"./ja":68,"./ja.js":68,"./jv":69,"./jv.js":69,"./ka":70,"./ka.js":70,"./kk":71,"./kk.js":71,"./km":72,"./km.js":72,"./kn":73,"./kn.js":73,"./ko":74,"./ko.js":74,"./ku":75,"./ku.js":75,"./ky":76,"./ky.js":76,"./lb":77,"./lb.js":77,"./lo":78,"./lo.js":78,"./lt":79,"./lt.js":79,"./lv":80,"./lv.js":80,"./me":81,"./me.js":81,"./mi":82,"./mi.js":82,"./mk":83,"./mk.js":83,"./ml":84,"./ml.js":84,"./mn":85,"./mn.js":85,"./mr":86,"./mr.js":86,"./ms":87,"./ms-my":88,"./ms-my.js":88,"./ms.js":87,"./mt":89,"./mt.js":89,"./my":90,"./my.js":90,"./nb":91,"./nb.js":91,"./ne":92,"./ne.js":92,"./nl":93,"./nl-be":94,"./nl-be.js":94,"./nl.js":93,"./nn":95,"./nn.js":95,"./pa-in":96,"./pa-in.js":96,"./pl":97,"./pl.js":97,"./pt":98,"./pt-br":99,"./pt-br.js":99,"./pt.js":98,"./ro":100,"./ro.js":100,"./ru":101,"./ru.js":101,"./sd":102,"./sd.js":102,"./se":103,"./se.js":103,"./si":104,"./si.js":104,"./sk":105,"./sk.js":105,"./sl":106,"./sl.js":106,"./sq":107,"./sq.js":107,"./sr":108,"./sr-cyrl":109,"./sr-cyrl.js":109,"./sr.js":108,"./ss":110,"./ss.js":110,"./sv":111,"./sv.js":111,"./sw":112,"./sw.js":112,"./ta":113,"./ta.js":113,"./te":114,"./te.js":114,"./tet":115,"./tet.js":115,"./tg":116,"./tg.js":116,"./th":117,"./th.js":117,"./tl-ph":118,"./tl-ph.js":118,"./tlh":119,"./tlh.js":119,"./tr":120,"./tr.js":120,"./tzl":121,"./tzl.js":121,"./tzm":122,"./tzm-latn":123,"./tzm-latn.js":123,"./tzm.js":122,"./ug-cn":124,"./ug-cn.js":124,"./uk":125,"./uk.js":125,"./ur":126,"./ur.js":126,"./uz":127,"./uz-latn":128,"./uz-latn.js":128,"./uz.js":127,"./vi":129,"./vi.js":129,"./x-pseudo":130,"./x-pseudo.js":130,"./yo":131,"./yo.js":131,"./zh-cn":132,"./zh-cn.js":132,"./zh-hk":133,"./zh-hk.js":133,"./zh-tw":134,"./zh-tw.js":134};function r(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id=166},168:function(t,e,a){var n=a(169);"string"==typeof n&&(n=[[t.i,n,""]]);var r={insert:"head",singleton:!1};a(4)(n,r);n.locals&&(t.exports=n.locals)},169:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,'body {\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\nhtml, body, #map-container {\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n\r\n/* Leaflet overrides */\r\n/*********************/\r\n.leaflet-popup-content-wrapper {\r\n    border-radius: 2px !important;\r\n    font-family: "Ubuntu", Tahoma, "Helvetica Neue", Helvetica, Arial, sans-serif !important;\r\n    font-size:14px !important;\r\n}\r\n.leaflet-popup-content-wrapper a{\r\n  color:#dd4814;\r\n  cursor:pointer;\r\n}\r\n\r\n.leaflet-popup-content-wrapper a:hover{\r\n  color:#97310e;\r\n}\r\n\r\n.leaflet-bar a:last-child {\r\n    border-bottom-left-radius: 2px !important;\r\n    border-bottom-right-radius: 2px !important;\r\n}\r\n\r\n.leaflet-bar a:first-child {\r\n    border-top-left-radius: 2px !important;\r\n    border-top-right-radius: 2px !important;\r\n}\r\n\r\n.leaflet-control-layers {\r\n  border-radius: 2px !important;\r\n}\r\n\r\n/* Stili customizzati Sidebar */\r\n/* ************************** */\r\n@media (min-width: 1200px) {\r\n    .leaflet-sidebar {\r\n        width: 620px;\r\n        max-width: 620px;\r\n    }\r\n}\r\n\r\n.leaflet-sidebar-header {\r\n\tbackground-color: #C0392B !important;\r\n}\r\n\r\n.leaflet-sidebar-tabs {\r\n    padding: 0 0 0 2px !important;\r\n}\r\n\r\n.leaflet-sidebar-tabs > ul > li {\r\n    font-size:20px;\r\n}\r\n\r\n.leaflet-sidebar-tabs > ul > li.active {\r\n    background-color: #4A235A !important;\r\n    margin: 0 0 0 -2px;\r\n}\r\n\r\n.leaflet-sidebar-tabs > ul > li:hover {\r\n    margin: 0 0 0 -2px;\r\n    font-size: 22px;\r\n    color: #C0392B;\r\n}\r\n\r\n/* Stili customizzati jsPanel */\r\n/* ************************** */\r\n.jsPanel { z-index: 10001 !important; }\r\n.jsPanel .jsPanel-hdr { line-height: 2.1; }\r\n.jsPanel .jsPanel-ftr.active { padding: 6px 8px; }\r\n.jsPanel-depth-3 { box-shadow: none; border-radius: 2px; }\r\n.jsPanel-headerlogo { font-size: 20px; }',""])},170:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),o=(a(137),a(6),a(141),a(142),a(144),a(145),a(147),a(148),a(154),a(155),a(157),a(160),a(136)),i=a.n(o),s=a(2),l=(a(162),a(163),{serverURL:"http://192.168.1.160:5000",development:!0});let c=function(){$.getJSON({url:l.serverURL+"/api/comuni",data:{token:l.token},success:function(t){var e,a="";$.each(t.features,(function(t,e){a+="<option data-icon='fas fa-city' value='"+e.properties.cod_istat+"'>"+e.properties.nome+"</option>"})),$("#comuni-filter").append(a),$("#comuni-filter").selectpicker("val","069101"),$("#comuni-filter").prop("disabled",!1),$("#comuni-filter").selectpicker("refresh"),b("069101"),g("069101"),e="069101",$.ajax({url:l.serverURL+"/api/raster/list",data:{istatComune:e},success:function(t){var e="";$.each(t.raster_data,(function(t,a){e+="<option data-icon='fas fa-layer-group' value='"+a.filename+"'>"+a.alias+"</option>"})),$("#raster-filter").empty().append(e),$("#raster-filter").selectpicker("refresh")}})}})};a(165);let d;a(135),a(167);const u=L.map("map-container").setView([42,14],6);u.on("click",(function(t){console.log(t.latlng.lat,t.latlng.lng)}));const p=L.canvas({padding:.5});u.createPane("labels"),u.getPane("labels").style.zIndex=650,u.getPane("labels").style.pointerEvents="none";L.layerGroup([L.tileLayer.wms("http://213.215.135.196/reflector/open/service?",{maxZoom:18,layers:"rv1",format:"image/png",attribution:'<a href="http://realvista.it" target="_blank">RealVista</a> 1.0 Open WMS &copy; <a href="http://e-geos.it" target="_blank">e-GEOS SpA</a> - CC BY SA'}),L.tileLayer("http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png",{maxZoom:18,attribution:"&copy; OpenStreetMap, &copy; CartoDB",pane:"labels"})]).addTo(u);const f=L.geoJSON(null,{style:function(t){return{color:"#dc3545",weight:3,fill:!1,opacity:1,clickable:!1}}}).addTo(u),b=function(t){f.clearLayers(),$.getJSON({url:l.serverURL+"/api/comuni",data:{token:l.token,istatComune:t},success:function(t){console.log(t),f.addData(t),u.fitBounds(f.getBounds())}})},m=L.geoJSON(null,{pane:"punti",pointToLayer:function(t,e){return L.circleMarker(e,{renderer:p,radius:8,fillColor:"#CC263C",fillOpacity:.75,color:"#FFF",weight:2,opacity:1})},onEachFeature:function(t,e){var a=e.feature.properties;e.bindPopup("<table class='table table-sm'><thead><tr><th><span class='list-element-title'>Punto di campionamento "+a.id+"</span></th></tr></thead><tbody><tr><td>Comune: "+a.comune+" ("+a.cod_istat+")</td></tr><tr><td>Altezza SLM: "+a.elevazione+" metri</td></tr></tbody></table>"),e.on({mouseover:function(t){t.target.setStyle({fillOpacity:1,radius:10,weight:3})},mouseout:function(t){e.setStyle({fillOpacity:.75,radius:8,weight:2})}})}}).addTo(u),g=function(t){m.clearLayers(),$.getJSON({url:l.serverURL+"/api/punti",data:{token:l.token,istatComune:t},success:function(t){m.addData(t),"pt"==$("#dati-filter").val()&&(setTimeout(function(){let t=[];$.each(m.toGeoJSON().features,(function(e,a){t.push([a.properties.id,a.properties.elevazione,a.properties.lat,a.properties.long,a.properties.comune,a.properties.cod_istat])})),$("#data-grid").DataTable({destroy:!0,data:t,scrollY:250,scrollX:!1,scrollCollapse:!0,searching:!1,paging:!1,info:!1,language:{url:"https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},columns:[{title:"Punto"},{title:"Elevazione"},{title:"Latitudine",sortable:!1},{title:"Longitudine",sortable:!1},{title:"Comune"},{title:"Cod. Istat",sortable:!1,visible:!1}],order:[[0,"asc"]]})}(),200),setTimeout(function(){var t=[];$.each(m.toGeoJSON().features,(function(e,a){t.push(a.properties.elevazione)}));var e=document.getElementById("data-chart").getContext("2d");d&&d.destroy(),d=new Chart(e,{type:"line",data:{labels:["Punto 1","Punto 2","Punto 3","Punto 4","Punto 5","Punto 6","Punto 7","Punto 8"],datasets:[{label:"Quota SLM",backgroundColor:"#CC263C",borderColor:"#ABB2B9",data:t}]},options:{responsive:!0}})}(),200))}})};var h=i.a.scale("YlGn").domain([0,1]);let j;document.querySelector("#raster-legend").style.backgroundImage="linear-gradient(to right,"+h.colors().toString()+")";var v=L.control.sidebar({autopan:!1,closeButton:!1,container:"sidebar",position:"right"}).addTo(u);let y=function(){v.open("home-tab")};a(168);let C=function(){$.ajax({url:l.serverURL+"/api/dati/microbiologici",data:{token:l.token,istatComune:$("#comuni-filter").val(),tipoDati:$("#dati-filter").val()},success:function(t){var e,a,n;"biodiversita_funzionale"==$("#dati-filter").val()?(e=t,a=[],n=$("#periodo-filter").val(),$.each(e,(function(t,e){e.PERIODO==n&&a.push([e["ID CAMPIONE"],e.COMUNE,e.PERIODO,e.AWCD,e.SW,e.VC])})),$("#data-grid").DataTable({destroy:!0,data:a,scrollY:250,scrollX:!1,scrollCollapse:!0,searching:!1,paging:!1,info:!1,language:{url:"https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},columns:[{title:"Punto"},{title:"Comune",visible:!1},{title:"Data"},{title:"AWCD"},{title:"SW"},{title:"VC"}],order:[[2,"asc"]]}),function(t){var e=document.getElementById("data-chart").getContext("2d");d&&d.destroy();var a=$("#periodo-filter").val(),n=[];$.each(t,(function(t,e){e.PERIODO==a&&n.push(e.AWCD)}));var r=[];$.each(t,(function(t,e){e.PERIODO==a&&r.push(e.SW)}));var o=[];$.each(t,(function(t,e){e.PERIODO==a&&o.push(e.VC)})),d=new Chart(e,{type:"bar",data:{labels:["Punto 1","Punto 2","Punto 3","Punto 4","Punto 5","Punto 6","Punto 7","Punto 8"],datasets:[{label:"AWCD",backgroundColor:"#FFC300",borderColor:"#FFC300",data:n},{label:"SW",backgroundColor:"#FF5733",borderColor:"#FF5733",data:r},{label:"VC",backgroundColor:"#C70039",borderColor:"#C70039",data:o}]},options:{responsive:!0}})}(t)):"biodiversita_genetica"==$("#dati-filter").val()&&(function(t){var e=[],a=$("#periodo-filter").val();$.each(t,(function(t,n){n.PERIODO==a&&e.push([n["ID CAMPIONE"],n.COMUNE,n.PERIODO,n["1-D"],n.Ed,n.Fo])})),$("#data-grid").DataTable({destroy:!0,data:e,scrollY:250,scrollX:!1,scrollCollapse:!0,searching:!1,paging:!1,info:!1,language:{url:"https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},columns:[{title:"Punto"},{title:"Comune",visible:!1},{title:"Data"},{title:"1-D"},{title:"Ed"},{title:"Fo"}],order:[[2,"asc"]]})}(t),function(t){var e=document.getElementById("data-chart").getContext("2d");d&&d.destroy();var a=$("#periodo-filter").val(),n=[];$.each(t,(function(t,e){e.PERIODO==a&&n.push(e["1-D"])}));var r=[];$.each(t,(function(t,e){e.PERIODO==a&&r.push(e.Ed)}));var o=[];$.each(t,(function(t,e){e.PERIODO==a&&o.push(e.Fo)})),d=new Chart(e,{type:"bar",data:{labels:["Punto 1","Punto 2","Punto 3","Punto 4","Punto 5","Punto 6","Punto 7","Punto 8"],datasets:[{label:"1-D",backgroundColor:"#FFC300",borderColor:"#FFC300",data:n},{label:"Ed",backgroundColor:"#FF5733",borderColor:"#FF5733",data:r},{label:"Fo",backgroundColor:"#C70039",borderColor:"#C70039",data:o}]},options:{responsive:!0}})}(t))}})},P=function(){$.ajax({url:l.serverURL+"/api/dati/vinificazione",data:{token:l.token,istatComune:$("#comuni-filter").val(),tipoDati:$("#dati-filter").val()},success:function(t){var e,a,n;"maturazione_tecnologica"==$("#dati-filter").val()?(e=t,a=[],n=$("#periodo-filter").val(),$.each(e,(function(t,e){e.PERIODO==n&&a.push([e.ID_CAMPIONE,e.COMUNE,e.PERIODO,e.ACIDITA_TOT,e.BABO,e.PH])})),$("#data-grid").DataTable({destroy:!0,data:a,scrollY:250,scrollX:!1,scrollCollapse:!0,searching:!1,paging:!1,info:!1,language:{url:"https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},columns:[{title:"Punto"},{title:"Comune",visible:!1},{title:"Data"},{title:"Acidità Tot."},{title:"BABO"},{title:"PH"}],order:[[2,"asc"]]}),function(t){var e=document.getElementById("data-chart").getContext("2d");d&&d.destroy();var a=$("#periodo-filter").val(),n=[];$.each(t,(function(t,e){e.PERIODO==a&&n.push(e.ACIDITA_TOT)}));var r=[];$.each(t,(function(t,e){e.PERIODO==a&&r.push(e.BABO)}));var o=[];$.each(t,(function(t,e){e.PERIODO==a&&o.push(e.PH)})),d=new Chart(e,{type:"bar",data:{labels:["Punto 1","Punto 2","Punto 3","Punto 4","Punto 5","Punto 6","Punto 7","Punto 8"],datasets:[{label:"Acidità Tot.",backgroundColor:"#4A235A",borderColor:"#4A235A",data:n},{label:"BABO",backgroundColor:"#9C27B0",borderColor:"#9C27B0",data:r},{label:"PH",backgroundColor:"#0097A7",borderColor:"#0097A7",data:o}]},options:{responsive:!0}})}(t)):"microvinificazione"==$("#dati-filter").val()&&(console.log(t),function(t){var e=[],a=$("#periodo-filter").val(),n=$("#microvin-filter").val();$.each(t,(function(t,r){r.PERIODO==a&&e.push([r.id,r.COMUNE,r.COD_ISTAT,r.ID_CAMPIONE,r.PERIODO,r[n]])})),$("#data-grid").DataTable({destroy:!0,data:e,scrollY:250,scrollX:!1,scrollCollapse:!0,searching:!1,paging:!1,info:!1,language:{url:"https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},columns:[{title:"id",visible:!1},{title:"Comune",visible:!1},{title:"Istat",visible:!1},{title:"Punto"},{title:"Data"},{title:$("#microvin-filter option:selected").text()}],order:[[0,"asc"]]})}(t),function(t){var e=document.getElementById("data-chart").getContext("2d");d&&d.destroy();var a=$("#periodo-filter").val(),n=$("#microvin-filter").val(),r=[];$.each(t,(function(t,e){e.PERIODO==a&&r.push(e[n])})),d=new Chart(e,{type:"bar",data:{labels:["Punto 1","Punto 2","Punto 3","Punto 4","Punto 5","Punto 6","Punto 7","Punto 8"],datasets:[{label:$("#microvin-filter option:selected").text(),backgroundColor:"#4A235A",borderColor:"#4A235A",data:r}]},options:{responsive:!0}})}(t))}})};window.jQuery=r.a,window.$=r.a,r.a.fn.selectpicker.Constructor.BootstrapVersion="4",document.addEventListener("DOMContentLoaded",t=>{u.invalidateSize(),function(){let t=s.a.modal.create({id:"panel-auth",closeOnBackdrop:!1,closeOnEscape:!1,theme:"#C0392B",border:"1px solid",iconfont:"fas",headerLogo:'<span>&nbsp;<i class="fas fa-user"></i></span>',headerTitle:"Sistema Informativo Dati Agroambientali",headerControls:"none md",position:"center-top 0 58",contentSize:"450 250",content:'<div class="col-md-12"><input id="username" type="text" class="form-control" placeholder="Nome utente"></input><br/><input id="password" type="password" class="form-control" placeholder="Password"></input></div><br/><div class="col-md-12"><p id="login-msg" class="alert alert-warning"><i class="fas fa-key"></i> Inserire le credenziali di accesso</p></div>',footerToolbar:'<button id="login-btn" class="btn btn-sm btn-secondary">Login <i class="fas fa-sign-in-alt"></i></button>',callback:function(){this.content.style.padding="20px",document.querySelector("#login-btn").addEventListener("click",(function(){$.get({url:"http://192.168.1.160:5000/api/login",data:{username:$("#username").val(),password:$("#password").val()},success:function(e){console.log(e.token),l.token=e.token,c(),$("#login-msg").removeClass("alert-warning alert-danger").addClass("alert-success").html("<i class='fas fa-cog fa-spin'></i> Autenticazione riuscita! Caricamento dati..."),setTimeout((function(){console.log(l),document.querySelector(".leaflet-sidebar").classList.remove("collapsed"),y(),t.close()}),3e3)},error:function(t){$("#login-msg").removeClass("alert-warning").addClass("alert-danger").html("<i class='fas fa-times'></i> Autenticazione fallita!")}})}))}})}(),r()("#microvin-filter").selectpicker("hide")}),r()("#comuni-filter, #dati-filter, #periodo-filter").change((function(){var t=r()("#comuni-filter").val(),e=r()("#dati-filter").val();r()("#periodo-filter").val();b(t),g(t),"biodiversita_funzionale"==e||"biodiversita_genetica"==e?(C(),r()("#microvin-filter").selectpicker("hide")):("microvinificazione"==e?(r()("#microvin-filter").selectpicker("show"),r()("#microvin-filter").change((function(){P()}))):r()("#microvin-filter").selectpicker("hide"),P())})),r()("#add-raster-btn").click((function(){!function(){u.hasLayer(j)&&(console.log("pulizia raster precedente"),j.remove()),console.log("caricamento raster");var t=l.serverURL+"/raster_data/"+$("#raster-filter").val();fetch(t).then(t=>t.arrayBuffer()).then(t=>{parseGeoraster(t).then(t=>{j=new GeoRasterLayer({georaster:t,opacity:.85,pixelValuesToColorFn:function(e){return e[0]===t.noDataValue?"rgba(255,255,255,0.0)":h(e[0]).hex()},resolution:256}),console.log(j.georaster),j.addTo(u),console.log("raster caricato"),console.log("raster ricaricato")})})}()})),r()("#remove-raster-btn").click((function(){j.remove()}))}});